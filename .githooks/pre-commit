#!/bin/bash

# pre-commit hook - æ£€æŸ¥æ–‡æ¡£æ˜¯å¦éœ€è¦æ›´æ–°

DOC_FILES=(
  "README.md"
  "DESIGN.md"
  "AGENTS.md"
  "CHANGELOG.md"
)

# æ£€æŸ¥æ˜¯å¦æœ‰ä»£ç æ–‡ä»¶å˜æ›´ä½†æ–‡æ¡£æœªæ›´æ–°
CODE_FILES=$(git diff --name-only HEAD~1 HEAD 2>/dev/null | grep -E '\.(vue|js|css|html)$' || true)

if [ -n "$CODE_FILES" ]; then
  echo "ğŸ“ æ£€æµ‹åˆ°ä»£ç å˜æ›´ï¼Œè¯·æ£€æŸ¥ä»¥ä¸‹æ–‡æ¡£æ˜¯å¦éœ€è¦æ›´æ–°ï¼š"
  echo ""
  for doc in "${DOC_FILES[@]}"; do
    if git diff HEAD~1 HEAD -- "$doc" 2>/dev/null | grep -q .; then
      echo "  âœ… $doc"
    else
      echo "  âš ï¸  $doc - å¯èƒ½éœ€è¦æ›´æ–°"
    fi
  done
  echo ""
  echo "å¦‚éœ€è·³è¿‡æ­¤æ£€æŸ¥ï¼Œä½¿ç”¨: git commit --no-verify"
fi

exit 0
