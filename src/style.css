@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 210 30% 98%;
    --foreground: 210 10% 20%;
    --card: 0 0% 100%;
    --card-foreground: 210 10% 20%;

    /* 原有主题色变量 */
    --peppa-blue: #4A90E2;
    --peppa-blue-light: #7AB8FF;
    --peppa-blue-dark: #2A70C2;
    --peppa-cyan: #26C6DA;
    --peppa-green: #4CAF50;
    --peppa-yellow: #FFD54F;
    --peppa-orange: #FF9800;
    --peppa-purple: #AB47BC;
    --peppa-red: #EF5350;

    /* 马卡龙色系变量 */
    --macaron-primary: #FF8A80;
    --macaron-primary-light: #FFAB91;
    --macaron-blue: #4FC3F7;
    --macaron-mint: #80CBC4;
    --macaron-cream: #FFF176;
    --macaron-lavender: #CE93D8;
    --macaron-peach: #FFAB91;
  }

  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  body {
    font-family: 'Alimama FangYuanTi VF', 'Nunito', 'Comic Sans MS', cursive, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    background: linear-gradient(135deg, #FFF8E1 0%, #F3E5F5 50%, #E0F7FA 100%);
    min-height: 100vh;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    /* Prevent pull-to-refresh and overscroll effects on mobile */
    overscroll-behavior-y: none;
    -webkit-overflow-scrolling: touch;
  }

  #app {
    min-height: 100vh;
    /* Ensure app container handles mobile viewport properly */
    overflow-x: hidden;
  }
}

/* ============================================
   通用动画库
   ============================================ */

/* 答案反馈动画 */
@keyframes answerPop {
  0% { transform: scale(0.5); opacity: 0; }
  50% { transform: scale(1.2); }
  100% { transform: scale(1); opacity: 1; }
}

@keyframes answerShake {
  0%, 100% { transform: translateX(0); }
  10%, 30%, 50%, 70%, 90% { transform: translateX(-8px); }
  20%, 40%, 60%, 80% { transform: translateX(8px); }
}

/* 庆祝粒子动画 */
@keyframes confetti-fall {
  0% {
    transform: translateY(-10px) rotate(0deg);
    opacity: 1;
  }
  100% {
    transform: translateY(100vh) rotate(720deg);
    opacity: 0;
  }
}

@keyframes confetti-float {
  0%, 100% {
    transform: translateX(0) translateY(0) rotate(0deg);
  }
  25% {
    transform: translateX(10px) translateY(-10px) rotate(90deg);
  }
  50% {
    transform: translateX(0) translateY(-20px) rotate(180deg);
  }
  75% {
    transform: translateX(-10px) translateY(-10px) rotate(270deg);
  }
}

/* 脉冲光环动画 */
@keyframes pulse-ring {
  0% {
    transform: scale(0.8);
    opacity: 0.8;
  }
  100% {
    transform: scale(2);
    opacity: 0;
  }
}

/* 闪烁动画 */
@keyframes twinkle {
  0%, 100% { opacity: 1; transform: scale(1); }
  50% { opacity: 0.5; transform: scale(0.8); }
}

/* 果冻弹跳动画 */
@keyframes jelly {
  0%, 100% { transform: scale(1, 1); }
  25% { transform: scale(0.9, 1.1); }
  50% { transform: scale(1.1, 0.9); }
  75% { transform: scale(0.95, 1.05); }
}

/* 漂浮动画 */
@keyframes float-gentle {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-15px); }
}

/* 旋转漂浮 */
@keyframes float-rotate {
  0% { transform: translateY(0) rotate(0deg); }
  50% { transform: translateY(-20px) rotate(10deg); }
  100% { transform: translateY(0) rotate(0deg); }
}

/* 心跳动画 */
@keyframes heartbeat {
  0%, 100% { transform: scale(1); }
  14% { transform: scale(1.1); }
  28% { transform: scale(1); }
  42% { transform: scale(1.1); }
  70% { transform: scale(1); }
}

/* 滑动入场 */
@keyframes slide-up {
  0% { transform: translateY(30px); opacity: 0; }
  100% { transform: translateY(0); opacity: 1; }
}

@keyframes slide-down {
  0% { transform: translateY(-30px); opacity: 0; }
  100% { transform: translateY(0); opacity: 1; }
}

@keyframes slide-left {
  0% { transform: translateX(30px); opacity: 0; }
  100% { transform: translateX(0); opacity: 1; }
}

@keyframes slide-right {
  0% { transform: translateX(-30px); opacity: 0; }
  100% { transform: translateX(0); opacity: 1; }
}

/* 弹性缩放 */
@keyframes bounce-scale {
  0% { transform: scale(0); opacity: 0; }
  50% { transform: scale(1.2); }
  70% { transform: scale(0.9); }
  100% { transform: scale(1); opacity: 1; }
}

/* 摇摆动画 */
@keyframes swing {
  0%, 100% { transform: rotate(0deg); }
  20% { transform: rotate(5deg); }
  40% { transform: rotate(-5deg); }
  60% { transform: rotate(3deg); }
  80% { transform: rotate(-3deg); }
}

/* 呼吸发光 */
@keyframes glow-pulse {
  0%, 100% { box-shadow: 0 0 5px rgba(255, 255, 255, 0.5); }
  50% { box-shadow: 0 0 20px rgba(255, 255, 255, 0.8), 0 0 40px rgba(255, 255, 255, 0.4); }
}

/* 渐变流动 */
@keyframes gradient-shift {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

/* ============================================
   动画类
   ============================================ */

.animate-answer-pop {
  animation: answerPop 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

.animate-answer-shake {
  animation: answerShake 0.6s ease-in-out;
}

.animate-confetti-fall {
  animation: confetti-fall 3s ease-in forwards;
}

.animate-confetti-float {
  animation: confetti-float 4s ease-in-out infinite;
}

.animate-pulse-ring {
  animation: pulse-ring 1s ease-out infinite;
}

.animate-twinkle {
  animation: twinkle 2s ease-in-out infinite;
}

.animate-jelly {
  animation: jelly 0.5s ease;
}

.animate-float-gentle {
  animation: float-gentle 3s ease-in-out infinite;
}

.animate-float-rotate {
  animation: float-rotate 4s ease-in-out infinite;
}

.animate-heartbeat {
  animation: heartbeat 1.5s ease-in-out infinite;
}

.animate-slide-up {
  animation: slide-up 0.5s ease-out forwards;
}

.animate-slide-down {
  animation: slide-down 0.5s ease-out forwards;
}

.animate-slide-left {
  animation: slide-left 0.5s ease-out forwards;
}

.animate-slide-right {
  animation: slide-right 0.5s ease-out forwards;
}

.animate-bounce-scale {
  animation: bounce-scale 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards;
}

.animate-swing {
  animation: swing 1s ease-in-out;
}

.animate-glow-pulse {
  animation: glow-pulse 2s ease-in-out infinite;
}

.animate-gradient-shift {
  background-size: 200% 200%;
  animation: gradient-shift 3s ease infinite;
}

/* ============================================
   过渡效果
   ============================================ */

.fade-enter-active,
.fade-leave-active {
  transition: opacity 0.2s ease;
}

.fade-enter-from,
.fade-leave-to {
  opacity: 0;
}

/* 题目切换过渡 */
.question-enter-active,
.question-leave-active {
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.question-enter-from {
  opacity: 0;
  transform: translateY(30px) scale(0.95);
}

.question-leave-to {
  opacity: 0;
  transform: translateY(-30px) scale(0.95);
}

/* 弹性过渡 */
.bounce-enter-active {
  transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.bounce-leave-active {
  transition: all 0.2s ease;
}

.bounce-enter-from,
.bounce-leave-to {
  opacity: 0;
  transform: scale(0.8);
}

@layer components {
  /* ============================================
     Cliomorphism 风格组件 - 软3D玩具感
     ============================================ */

  /* 统一的主按钮样式 - 立体胶囊按钮 */
  .btn-clay-primary {
    @apply relative font-bold rounded-full transition-all duration-200;
    @apply bg-gradient-to-b from-macaron-primary to-macaron-primary-dark;
    @apply text-white shadow-clay;
    @apply border-0;
    @apply hover:shadow-clay-hover hover:-translate-y-0.5;
    @apply active:shadow-clay-active active:translate-y-0.5;
  }

  /* 次要按钮 */
  .btn-clay-secondary {
    @apply relative font-bold rounded-full transition-all duration-200;
    @apply bg-white text-macaron-blue-dark;
    @apply shadow-clay border-2 border-macaron-blue/20;
    @apply hover:shadow-clay-hover hover:-translate-y-0.5;
    @apply active:shadow-clay-active active:translate-y-0.5;
  }

  /* 成功按钮 */
  .btn-clay-success {
    @apply relative font-bold rounded-full transition-all duration-200;
    @apply bg-gradient-to-b from-macaron-mint to-macaron-mint-dark;
    @apply text-white shadow-clay;
    @apply hover:shadow-clay-hover hover:-translate-y-0.5;
    @apply active:shadow-clay-active active:translate-y-0.5;
  }

  /* 卡片 - 软3D风格 */
  .card-clay {
    @apply bg-white rounded-cute-xl;
    @apply shadow-clay;
    @apply border-2 border-white/50;
    @apply transition-all duration-300;
    @apply hover:shadow-clay-hover hover:-translate-y-1;
  }

  /* 卡片激活状态 */
  .card-clay-active {
    @apply shadow-clay-active translate-y-0.5;
  }

  /* 玻璃拟态卡片 */
  .card-glass {
    @apply bg-white/80 backdrop-blur-md rounded-cute-xl;
    @apply shadow-glass;
    @apply border border-white/50;
  }

  /* 光晕卡片 */
  .card-glow {
    @apply bg-white rounded-cute-xl shadow-cute;
    @apply transition-all duration-300;
    @apply hover:shadow-glow hover:border-macaron-blue/30;
  }

  /* 数据展示卡片 */
  .stat-card-clay {
    @apply bg-white rounded-cute-lg p-4;
    @apply shadow-clay;
    @apply border-2 border-transparent;
    @apply transition-all duration-300;
    @apply hover:shadow-clay-hover hover:-translate-y-0.5;
  }

  /* 图标包装器 - 软3D */
  .icon-clay {
    @apply flex items-center justify-center rounded-cute-lg;
    @apply shadow-clay;
    @apply transition-all duration-200;
  }

  /* 进度条 - 渐变填充 */
  .progress-clay {
    @apply h-3 bg-gray-100 rounded-full overflow-hidden;
    @apply shadow-clay-inset;
  }

  .progress-clay-fill {
    @apply h-full rounded-full;
    @apply bg-gradient-to-r from-macaron-blue to-macaron-blue-light;
    @apply transition-all duration-500 ease-out;
  }

  /* 输入框 - 软3D凹陷 */
  .input-clay {
    @apply rounded-cute-lg px-4 py-3;
    @apply bg-gray-50 shadow-clay-inset;
    @apply border-2 border-transparent;
    @apply focus:outline-none focus:border-macaron-blue/30 focus:shadow-clay;
    @apply transition-all duration-200;
  }

  /* 浮动装饰元素 */
  .float-decoration {
    @apply absolute pointer-events-none;
    @apply animate-float-gentle;
  }

  /* 光晕效果 */
  .glow-effect {
    @apply relative;
  }

  .glow-effect::before {
    content: '';
    @apply absolute inset-0 rounded-inherit;
    @apply blur-xl opacity-50;
    @apply -z-10;
  }

  /* 渐变文字 */
  .text-gradient {
    @apply bg-clip-text text-transparent;
    @apply bg-gradient-to-r from-macaron-primary via-macaron-blue to-macaron-mint;
  }

  /* 呼吸边框 */
  .border-breathe {
    @apply relative;
    animation: border-pulse 2s ease-in-out infinite;
  }

  @keyframes border-pulse {
    0%, 100% { border-color: rgba(79, 195, 247, 0.3); }
    50% { border-color: rgba(79, 195, 247, 0.8); }
  }

  /* 按压反馈 */
  .press-feedback {
    @apply transition-transform duration-150;
    @apply active:scale-95;
  }

  /* 悬浮反馈 */
  .hover-lift {
    @apply transition-all duration-300;
    @apply hover:-translate-y-1 hover:shadow-lg;
  }

  /* 内容块 - 玻璃拟态 */
  .content-glass {
    @apply bg-white/90 backdrop-blur-sm rounded-cute-lg;
    @apply shadow-glass border border-white/50;
  }

  /* 标题样式 - 渐变发光 */
  .title-glow {
    @apply font-bold text-gradient;
    @apply drop-shadow-sm;
  }

  /* 统一的内容块样式 */
  .content-block {
    @apply bg-white/90 backdrop-blur-sm rounded-cute-lg shadow-cute;
    @apply border-4 border-peppa-blue-light/20;
  }

  /* 进度条样式 */
  .progress-bar {
    @apply h-3 bg-peppa-blue/20 rounded-full overflow-hidden;
  }

  .progress-bar-fill {
    @apply h-full bg-gradient-to-r from-peppa-blue to-peppa-blue-dark rounded-full;
    @apply transition-all duration-300 ease-out;
  }

  /* 输入框样式 */
  .input-field {
    @apply rounded-cute-lg border-2 border-peppa-blue-light/50 px-4 py-3;
    @apply focus:outline-none focus:border-peppa-blue focus:ring-4 focus:ring-peppa-blue/20;
    @apply transition-all duration-200;
  }
}

@layer utilities {
  /* 动画延迟工具类 */
  .delay-100 { animation-delay: 100ms; }
  .delay-200 { animation-delay: 200ms; }
  .delay-300 { animation-delay: 300ms; }
  .delay-400 { animation-delay: 400ms; }
  .delay-500 { animation-delay: 500ms; }
  .delay-600 { animation-delay: 600ms; }
  .delay-700 { animation-delay: 700ms; }
  .delay-800 { animation-delay: 800ms; }

  /* 圆角继承 */
  .rounded-inherit {
    border-radius: inherit;
  }

  /* 文字阴影 */
  .text-shadow {
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  }

  .text-shadow-lg {
    text-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
  }

  /* 触摸优化 */
  .touch-manipulation {
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
  }

  /* 安全区域 */
  .safe-top {
    padding-top: max(1rem, env(safe-area-inset-top));
  }

  .safe-bottom {
    padding-bottom: max(1rem, env(safe-area-inset-bottom));
  }
}

@layer components {
  /* 统一的按钮样式 - 主按钮 */
  .btn-primary {
    @apply bg-gradient-to-r from-peppa-blue to-peppa-blue-dark text-white font-bold rounded-cute-xl shadow-cute;
    @apply hover:from-peppa-blue-light hover:to-peppa-blue active:scale-95;
    @apply transition-all duration-200;
    @apply border-4 border-transparent;
  }

  /* 统一的按钮样式 - 次按钮 */
  .btn-secondary {
    @apply bg-white text-peppa-blue-dark font-bold rounded-cute-xl shadow-cute;
    @apply hover:bg-peppa-blue-light/20 active:scale-95;
    @apply transition-all duration-200;
    @apply border-4 border-peppa-blue-light/30;
  }

  /* 统一的按钮样式 - 成功按钮 */
  .btn-success {
    @apply bg-gradient-to-r from-peppa-green to-peppa-green-dark text-white font-bold rounded-cute-xl shadow-cute;
    @apply hover:from-peppa-green-light hover:to-peppa-green active:scale-95;
    @apply transition-all duration-200;
  }

  /* 统一的卡片样式 */
  .card {
    @apply bg-white rounded-cute-xl shadow-card;
    @apply border-2 border-peppa-blue/20;
  }

  /* 统一的数据卡片样式 */
  .stat-card {
    @apply bg-white rounded-cute-lg shadow-card p-4 text-center;
    @apply border-2;
  }

  /* 统一的内容块样式 */
  .content-block {
    @apply bg-white/90 backdrop-blur-sm rounded-cute-lg shadow-cute;
    @apply border-4 border-peppa-blue-light/20;
  }

  /* 进度条样式 */
  .progress-bar {
    @apply h-3 bg-peppa-blue/20 rounded-full overflow-hidden;
  }

  .progress-bar-fill {
    @apply h-full bg-gradient-to-r from-peppa-blue to-peppa-blue-dark rounded-full;
    @apply transition-all duration-300 ease-out;
  }

  /* 输入框样式 */
  .input-field {
    @apply rounded-cute-lg border-2 border-peppa-blue-light/50 px-4 py-3;
    @apply focus:outline-none focus:border-peppa-blue focus:ring-4 focus:ring-peppa-blue/20;
    @apply transition-all duration-200;
  }
}
