---
name: 清理音频调试注释
overview: 清理音频相关代码中的 iOS Safari 26.2 调试注释，保持代码整洁。
todos:
  - id: search-debug-comments
    content: 搜索项目中所有 iOS Safari 26.2 调试注释
    status: completed
  - id: review-audio-utils
    content: 审查并清理 audioDebug.js 中的调试代码
    status: completed
    dependencies:
      - search-debug-comments
  - id: review-sound-composable
    content: 审查并清理 useSound.js 中的调试注释
    status: completed
    dependencies:
      - search-debug-comments
  - id: review-audio-components
    content: 审查其他音频组件中的调试注释
    status: completed
    dependencies:
      - search-debug-comments
  - id: verify-audio-functionality
    content: 验证清理后音频功能正常工作
    status: completed
    dependencies:
      - review-audio-utils
      - review-sound-composable
      - review-audio-components
  - id: update-documentation
    content: 根据代码清理情况评估并更新文档
    status: completed
    dependencies:
      - verify-audio-functionality
---

## 任务概述

清理 math-game 项目中音频相关代码内遗留的 iOS Safari 26.2 版本调试注释，移除所有调试用途的代码片段和注释，保持代码整洁可维护。

## 核心任务

- 搜索并定位所有包含 "iOS Safari 26.2" 调试注释的代码文件
- 清理音频工具函数中的调试日志和注释
- 清理音频组件中的调试相关代码
- 验证清理后音频功能正常工作

## 技术栈

- 框架：Vue 3 (Composition API)
- 语言：JavaScript
- 构建工具：Vite
- 代码规范：遵循项目现有 AGENTS.md 指南

## 代码结构

### 目标文件范围

通过代码搜索定位包含调试注释的文件：

```
src/
├── utils/
│   └── audioDebug.js          # 音频调试工具函数
├── components/
│   └── AudioDiagnosticPanel.vue    # 音频诊断面板（已删除）
│   └── 其他音频相关组件        # 可能包含调试注释
├── composables/
│   └── useSound.js            # 音频合成逻辑（可能包含调试代码）
└── stores/
    └── settings.js            # 设置存储（可能包含音频调试状态）
```

### 清理策略

1. **搜索定位**：使用全局搜索查找所有 "iOS Safari 26.2" 和 "debug" 关键词
2. **代码审查**：逐文件审查调试注释上下文，确认是否可以安全删除
3. **保留必要日志**：保留错误处理中的 console.error，仅删除调试日志
4. **功能验证**：清理后确保音频播放、音效合成功能正常

### 关键代码结构

**音频工具函数**（src/utils/audioDebug.js）：

- 包含 iOS Safari 兼容性检测
- 包含大量 console.log 调试输出
- 需要清理版本号和调试日志

**音频合成逻辑**（src/composables/useSound.js）：

- 可能包含调试状态追踪
- 需要清理临时注释和测试代码